!function(t){var e={};function d(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,d),n.l=!0,n.exports}d.m=t,d.c=e,d.d=function(t,e,r){d.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},d.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},d.t=function(t,e){if(1&e&&(t=d(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(d.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)d.d(r,n,function(e){return t[e]}.bind(null,n));return r},d.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return d.d(e,"a",e),e},d.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},d.p="",d(d.s=0)}([function(t,e,d){"use strict";d.r(e),d(1),d(5);const r=()=>{const t=()=>{const t=localStorage.getItem("project");return!!t&&JSON.parse(t)},e=t=>{localStorage.setItem("project",JSON.stringify({todos:t}))},d=e=>t().todos.find(t=>t.projectId==e)||!1;return{deleteTaskById:(d,r)=>{const n=t().todos.map(t=>{if(d==t.projectId){const e=t.tasks.filter(t=>t.taskId!=r);t.tasks=e}return t});e(n)},deleteProjectById:d=>{const r=t().todos.filter(t=>t.projectId!=d);e(r)},getProjectById:d,saveTodoProject:t=>{let d=localStorage.getItem("project");d||(d=localStorage.setItem("project",'{"todos": []}'),d=localStorage.getItem("project")),d=JSON.parse(d);const r=d.todos.length+1,n=[...d.todos,{projectName:t,projectId:r,tasks:[]}];return e(n),r},getProjects:t,saveTodoTask:d=>{const r=t().todos;if(!r)return!1;let n=0;const o=r.map(t=>{if(d.projectId==t.projectId){const e=((t,e)=>(t.hasOwnProperty("taskId")?e=((t,e)=>{const d=t.tasks.map(t=>t.taskId==e.taskId?e:t);return{...t,tasks:d}})(e,t):(t={...t,taskId:e.tasks.length+1},e={...e,tasks:[...e.tasks,t]}),{givenTodo:t,project:e}))(d,t);return n=e.givenTodo.taskId,e.project}return t});return e(o),n},getTaskById:(t,e)=>{const r=d(t);if(!r)return!1;return r.tasks.find(t=>t.taskId==e)||!1}}},n=(t="modalStation")=>{const e=document.getElementById(t);for(;e.childElementCount>0;)e.removeChild(e.firstElementChild);return e},o=t=>{const e=document.createElement("li"),d=document.createElement("a");return e.classList.add("py-1"),d.classList.add("text-xl","font-light","cursor-pointer"),d.setAttribute("data",t.projectId),d.addEventListener("click",window.selectProjectToDisplay),d.innerText=t.projectName,e.appendChild(d),e},a=t=>{t.preventDefault(),n()},i=(t,e,d,r=null,n=null)=>{const o=document.createElement("select");o.setAttribute("required","required");const a=document.createElement("option");return a.setAttribute("disabled","disabled"),r||(a.selected="true"),a.innerText="Choose "+n,o.appendChild(a),o.classList.add("border-b","border-indigo-500"),t&&t.map(t=>{const n=document.createElement("option");r==t[d]&&(n.selected=!0),n.setAttribute("value",t[d]),n.innerText=t[e],o.appendChild(n)}),o},s=t=>{const e=document.createElement("ul");return e.classList.add("flex-row","divide-y-2","divide-indigo-200","divide-dashed"),e.setAttribute("id",t.projectId),e},c=t=>{t.preventDefault();const e=r(),d=t.target.getAttribute("data-pid");if(d){e.deleteProjectById(d);const t=document.querySelector(`[data-card-pid="${d}"]`),r=document.querySelector(`a[data="${d}"]`);t&&(t.parentElement.removeChild(t),r.parentElement.parentElement.removeChild(r.parentElement))}return!1},l=t=>{const e=document.createElement("div");e.classList.add("flex","items-center","justify-between","px-8","py-4","bg-gray-200","cursor-pointer");const d=document.createElement("button");d.setAttribute("data-pid",t.projectId),d.classList.add("text-sm","text-red-600","focus:outline-none"),d.innerText="Delete",d.addEventListener("click",c);const r=document.createElement("h2");return r.classList.add("text-2xl","font-light","text-gray-700"),r.innerText=t.projectName,e.appendChild(r),e.appendChild(d),e},u="inline-flex justify-center w-full px-4 py-2 text-base font-medium leading-6 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-red sm:text-sm sm:leading-5".split(" ");(()=>{let t=localStorage.getItem("init");if(!t){const e=r();t=localStorage.setItem("init","true");const d=e.saveTodoProject("Default project");e.saveTodoTask({projectId:d,title:"Get familiar with the app",desc:"Try all the features",date:"2020-11-06",priority:"1"})}})();const p=(()=>{const t=r(),e=(e={})=>{const r=t.getProjects(),o=i(r.todos,"projectName","projectId",e.projectId,"Project");o.setAttribute("id","projectId");const s=document.createElement("input");s.setAttribute("type","text"),s.setAttribute("value",e.title||""),s.setAttribute("id","title"),s.setAttribute("required","required"),s.setAttribute("placeholder","Task title"),s.classList.add("border-b","border-indigo-500","w-full");const c=document.createElement("textarea");c.innerText=e.desc||"",c.setAttribute("cols","30"),c.setAttribute("row","30"),c.setAttribute("id","desc"),c.classList.add("border-b","border-indigo-500","px-3"),c.setAttribute("placeholder","Task description"),c.classList.add("border-b","border-solid","border-1","border-gray-600","p-3","col-span-2","w-full");const l=document.createElement("input");l.setAttribute("value",e.date||""),l.setAttribute("type","date"),l.setAttribute("id","date"),l.setAttribute("placeholder","Due date"),l.classList.add("border-b","border-indigo-500","w-full");const p=i([{priorityName:"One",priorityValue:"1"},{priorityName:"Two",priorityValue:"2"},{priorityName:"Three",priorityValue:"3"}],"priorityName","priorityValue",e.priority||"","Priority");p.setAttribute("placeholder","Task priority"),p.setAttribute("id","priority");const m=document.createElement("input");m.setAttribute("type","button"),m.setAttribute("id","create-task");const b=e.hasOwnProperty("projectId")?"Update Task":"Create Task";m.setAttribute("value",b),m.setAttribute("task-id",e.taskId||""),m.classList.add(...u),m.addEventListener("click",d);const g=document.createElement("form");g.classList.add("p-2","flex","flex-col","row-gap-8","w-full","pt-6"),g.setAttribute("id","addTodo"),g.appendChild(o),g.appendChild(s),g.appendChild(l),g.appendChild(p),g.appendChild(c),g.appendChild(m);const f=document.getElementById("tmpl-modal").content.cloneNode(!0),y=f.getElementById("working-station");f.getElementById("modalContainer").addEventListener("click",a),y.appendChild(g),n().appendChild(f)},d=e=>{e.preventDefault();const d=document.getElementById("projectId").value,r=document.getElementById("title").value,o=document.getElementById("desc").value,a=document.getElementById("date").value,i=document.getElementById("priority").value;let s=e.target.getAttribute("task-id"),c={projectId:d,title:r,desc:o,date:a,priority:i};const l=s&&""!=s;l&&(c={...c,taskId:s}),s=t.saveTodoTask(c),c={...c,taskId:s};const u=g(c);if(l){const t=document.querySelector(`[data-task-id="${d}_${s}"]`);t.parentElement.replaceChild(u,t)}else{const t=document.getElementById(d);t&&t.appendChild(u)}document.getElementById("addTodo").reset(),n()},c=t=>{t.target.nextElementSibling.classList.toggle("hidden")},p=t=>{const e=l(t),d=s(t);t.tasks.forEach(t=>{const e=g(t);d.appendChild(e)});const r=document.createElement("div");r.setAttribute("data-card-pid",t.projectId),r.classList.add("card"),r.appendChild(e),r.appendChild(d),document.getElementById("taskStation").appendChild(r)},m=e=>{e.preventDefault();const d=e.target.getAttribute("data-pid"),r=e.target.getAttribute("data-tid");if(d&&r){t.deleteTaskById(d,r);const e=document.querySelector(`li[data-task-id="${d}_${r}"]`);e&&e.parentElement.removeChild(e)}return!1},b=d=>{d.preventDefault();const r=d.target.getAttribute("data-pid"),n=d.target.getAttribute("data-tid");if(!r||!n)return;const o=t.getTaskById(r,n);o&&e(o)},g=t=>{const e=document.createElement("h3");e.innerText=t.title,e.addEventListener("click",c),e.classList.add("cursor-pointer");const d=document.createElement("p"),r=document.createElement("p"),n=document.createElement("p"),o=document.createElement("button");o.setAttribute("data-pid",t.projectId),o.setAttribute("data-tid",t.taskId),o.classList.add("absolute","bottom-10","right-5","cursor-pointer","text-sm","text-red-600","focus:outline-none"),o.innerText="Delete",o.addEventListener("click",m);const a=document.createElement("button");a.setAttribute("data-pid",t.projectId),a.setAttribute("data-tid",t.taskId),a.classList.add("absolute","bottom-10","right-10","cursor-pointer","text-sm","text-indigo-900","focus:outline-none"),a.innerText="Edit",a.addEventListener("click",b),d.innerText=t.date,r.innerText=t.priority,n.innerText=t.desc;const i=document.createElement("div");i.classList.add("hidden"),i.appendChild(d),i.appendChild(r),i.appendChild(n),i.appendChild(a),i.appendChild(o);const s=document.createElement("li");s.setAttribute("data-task-id",`${t.projectId}_${t.taskId}`),s.appendChild(e),s.appendChild(i);const l=parseInt(t.priority,10),u=3===l?"bg-gray-100":2===l?"bg-indigo-200":"bg-indigo-300";return s.classList.add("px-8","py-4","shadow-lg","relative",u),s};window.selectProjectToDisplay=t=>{t.preventDefault();const e=t.target.getAttribute("data");n("taskStation"),f(!1,e)};const f=(e=!1,d=0)=>{const r=t.getProjects();if(r)if(e)y(r);else if(d){const e=t.getProjectById(d);p(e)}else y(r),r.todos.map(t=>p(t))},y=t=>{const e=document.getElementById("sidebarProjects");t.todos.forEach(t=>{const d=o(t);e.appendChild(d)})};return{displayAllProjects:t=>{t.preventDefault(),n(),n("sidebarProjects"),n("taskStation"),f()},createTask:d,taskForm:e,displayTodos:f}})();p.displayTodos();const m=(()=>{const t=()=>{const t=r(),e=document.getElementById("projectName").value;if(!e||""==e)return;const d={projectName:e,projectId:t.saveTodoProject(e)};document.getElementById("sidebarProjects").appendChild(o(d));const a=l(d),i=s(d),c=document.createElement("div");c.setAttribute("data-card-pid",d.projectId),c.classList.add("card"),c.appendChild(a),c.appendChild(i),document.getElementById("taskStation").appendChild(c),n()};return{createAddProjectForm:()=>{const e=document.createElement("form");e.classList.add("flex","flex-col","gap-y-6","w-full");const d=document.createElement("input");d.classList.add("border-b","p-4","hover:border-indigo-700","focus:border-indigo-700","w-full");const r=document.createElement("button");r.classList.add(...u),r.setAttribute("type","button"),r.addEventListener("click",t),r.innerText="Add a project",d.setAttribute("placeholder","Enter a project name"),d.setAttribute("id","projectName"),d.classList.add("float-right"),e.appendChild(d),e.appendChild(r);const o=document.getElementById("tmpl-modal").content.cloneNode(!0),i=o.getElementById("working-station");o.getElementById("modalContainer").addEventListener("click",a),i.appendChild(e),n().appendChild(o)}}})();document.getElementById("all-projects").addEventListener("click",p.displayAllProjects),document.getElementById("add-task").addEventListener("click",p.taskForm),document.getElementById("add-project").addEventListener("click",m.createAddProjectForm)},function(t,e){},,,,function(t,e){}]);