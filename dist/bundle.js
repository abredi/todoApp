!function(t){var e={};function d(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,d),n.l=!0,n.exports}d.m=t,d.c=e,d.d=function(t,e,r){d.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},d.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},d.t=function(t,e){if(1&e&&(t=d(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(d.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)d.d(r,n,function(e){return t[e]}.bind(null,n));return r},d.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return d.d(e,"a",e),e},d.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},d.p="",d(d.s=0)}([function(t,e,d){"use strict";d.r(e),d(1),d(5);const r=()=>{const t=()=>{const t=localStorage.getItem("project");return!!t&&JSON.parse(t)},e=t=>{localStorage.setItem("project",JSON.stringify({todos:t}))},d=e=>t().todos.find(t=>t.projectId==e)||!1;return{deleteTaskById:(d,r)=>{const n=t().todos.map(t=>{if(d==t.projectId){const e=t.tasks.filter(t=>t.taskId!=r);t.tasks=e}return t});e(n)},deleteProjectById:d=>{const r=t().todos.filter(t=>t.projectId!=d);e(r)},getProjectById:d,saveTodoProject:t=>{let d=localStorage.getItem("project");d||(d=localStorage.setItem("project",'{"todos": []}'),d=localStorage.getItem("project")),d=JSON.parse(d);const r=d.todos.length+1,n=[...d.todos,{projectName:t,projectId:r,tasks:[]}];return e(n),r},getProjects:t,saveTodoTask:d=>{const r=t().todos;if(!r)return!1;let n=0;const o=r.map(t=>{if(d.projectId==t.projectId){const r={};d.hasOwnProperty("taskId")?t.tasks=(e=d,t.tasks.map(t=>t.taskId==e.taskId?e:t)):(n=t.tasks.length+1,r={...d,taskId:n},t.tasks=[...t.tasks,r])}var e;return t});return e(o),n},getTaskById:(t,e)=>{const r=d(t);if(!r)return!1;return r.tasks.find(t=>t.taskId==e)||!1}}},n=(t="modalStation")=>{const e=document.getElementById(t);for(;e.childElementCount>0;)e.removeChild(e.firstElementChild);return e},o=t=>{const e=document.createElement("li"),d=document.createElement("a");return e.classList.add("py-1"),d.classList.add("text-xl","font-light","cursor-pointer"),d.setAttribute("data",t.projectId),d.addEventListener("click",window.selectProjectToDisplay),d.innerText=t.projectName,e.appendChild(d),e},a=t=>{t.preventDefault(),n()},i=(t,e,d,r=null)=>{const n=document.createElement("select");n.setAttribute("required","required");const o=document.createElement("option");return o.setAttribute("disabled","disabled"),r||(o.selected="true"),o.innerText="Choose One",n.appendChild(o),n.classList.add("border","border-indigo-500"),t&&t.map(t=>{const o=document.createElement("option");r==t[d]&&(o.selected=!0),o.setAttribute("value",t[d]),o.innerText=t[e],n.appendChild(o)}),n},s="inline-flex justify-center w-full px-4 py-2 text-base font-medium leading-6 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-red sm:text-sm sm:leading-5".split(" ");(()=>{let t=localStorage.getItem("init");if(!t){const e=r();t=localStorage.setItem("init","true");const d=e.saveTodoProject("Default project");e.saveTodoTask({projectId:d,title:"Get familiar with the app",desc:"Try all the features",date:"2020-11-06",priority:"1"})}})();const c=(()=>{const t=r(),e=(e={})=>{const r=t.getProjects(),o=i(r.todos,"projectName","projectId",e.projectId);o.setAttribute("id","projectId");const c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("value",e.title||""),c.setAttribute("id","title"),c.setAttribute("required","required"),c.setAttribute("placeholder","Task title"),c.classList.add("border","border-indigo-500","px-3");const l=document.createElement("textarea");l.innerText=e.desc||"",l.setAttribute("cols","30"),l.setAttribute("row","30"),l.setAttribute("id","desc"),l.classList.add("border","border-indigo-500","px-3"),l.setAttribute("placeholder","Task description"),l.classList.add("border","border-solid","border-1","border-gray-600","my-10","p-3");const u=document.createElement("input");u.setAttribute("value",e.date||""),u.setAttribute("type","date"),u.setAttribute("id","date"),u.setAttribute("placeholder","Due date"),u.classList.add("border","border-indigo-500");const p=i([{priorityName:"One",priorityValue:"1"},{priorityName:"Two",priorityValue:"2"},{priorityName:"Three",priorityValue:"3"}],"priorityName","priorityValue",e.priority||null);p.setAttribute("placeholder","Task priority"),p.classList.add("border","border-indigo-500","px-3"),p.setAttribute("id","priority");const m=document.createElement("input");m.setAttribute("type","button"),m.setAttribute("id","create-task");const b=e.hasOwnProperty("projectId")?"Update Task":"Create Task";m.setAttribute("value",b),m.setAttribute("task-id",e.taskId||null),m.classList.add(...s,"my-10"),m.addEventListener("click",d);const g=document.createElement("form");g.setAttribute("id","addTodo"),g.appendChild(o),g.appendChild(c),g.appendChild(l),g.appendChild(u),g.appendChild(p),g.appendChild(m);const y=document.getElementById("tmpl-modal").content.cloneNode(!0),f=y.getElementById("working-station");y.getElementById("modalContainer").addEventListener("click",a),f.appendChild(g),n().appendChild(y)},d=e=>{e.preventDefault();const d=document.getElementById("projectId").value,r=document.getElementById("title").value,o=document.getElementById("desc").value,a=document.getElementById("date").value,i=document.getElementById("priority").value;let s=e.target.getAttribute("task-id"),c={projectId:d,title:r,desc:o,date:a,priority:i};s&&(c={...c,taskId:s}),s=t.saveTodoTask(c),c={projectId:d,taskId:s,title:r,desc:o,date:a,priority:i};const l=b(c),u=document.getElementById(d);u&&u.appendChild(l),document.getElementById("addTodo").reset(),n()},c=t=>{t.target.nextElementSibling.classList.toggle("hidden")},l=t=>{const e=document.createElement("div");e.classList.add("flex","items-center","justify-between","px-8","py-4","bg-indigo-100","cursor-pointer");const d=document.createElement("button");d.setAttribute("data-pid",t.projectId),d.classList.add("text-sm","text-red-600","focus:outline-none"),d.innerText="Delete",d.addEventListener("click",u);const r=document.createElement("h2");r.classList.add("text-2xl","font-light","text-gray-700"),r.innerText=t.projectName,e.appendChild(r),e.appendChild(d);const n=document.createElement("ul");n.classList.add("flex-row","divide-y-2","divide-indigo-200","divide-dashed"),n.setAttribute("id",t.projectId),t.tasks.forEach(t=>{const e=b(t);n.appendChild(e)});const o=document.createElement("div");o.setAttribute("data-card-pid",t.projectId),o.classList.add("card"),o.appendChild(e),o.appendChild(n),document.getElementById("taskStation").appendChild(o)},u=e=>{e.preventDefault();const d=e.target.getAttribute("data-pid");if(d){t.deleteProjectById(d);const e=document.querySelector(`[data-card-pid="${d}"]`),r=document.querySelector(`a[data="${d}"]`);e&&(e.parentElement.removeChild(e),r.parentElement.removeChild(r))}return!1},p=e=>{e.preventDefault();const d=e.target.getAttribute("data-pid"),r=e.target.getAttribute("data-tid");if(d&&r){t.deleteTaskById(d,r);const e=document.querySelector(`button[data-tid="${r}"]`);e&&e.parentElement.parentElement.removeChild(e.parentElement)}return!1},m=d=>{d.preventDefault();const r=d.target.getAttribute("data-pid"),n=d.target.getAttribute("data-tid");if(!r||!n)return;const o=t.getTaskById(r,n);o&&e(o)},b=t=>{const e=document.createElement("h3");e.innerText=t.title,e.addEventListener("click",c),e.classList.add("cursor-pointer");const d=document.createElement("p"),r=document.createElement("p"),n=document.createElement("p"),o=document.createElement("button");o.setAttribute("data-pid",t.projectId),o.setAttribute("data-tid",t.taskId),o.classList.add("absolute","bottom-10","right-5","cursor-pointer","text-sm","text-red-600","focus:outline-none"),o.innerText="Delete",o.addEventListener("click",p);const a=document.createElement("button");a.setAttribute("data-pid",t.projectId),a.setAttribute("data-tid",t.taskId),a.classList.add("absolute","bottom-10","right-10","cursor-pointer","text-sm","text-indigo-900","focus:outline-none"),a.innerText="Edit",a.addEventListener("click",m),d.innerText=t.date,r.innerText=t.priority,n.innerText=t.desc;const i=document.createElement("div");i.classList.add("hidden"),i.appendChild(d),i.appendChild(r),i.appendChild(n),i.appendChild(a),i.appendChild(o);const s=document.createElement("li");s.appendChild(e),s.appendChild(i);const l=parseInt(t.priority,10),u=3===l?"bg-gray-100":2===l?"bg-indigo-200":"bg-indigo-300";return s.classList.add("px-8","py-4","shadow-lg","relative",u),s};window.selectProjectToDisplay=t=>{t.preventDefault();const e=t.target.getAttribute("data");n("taskStation"),g(!1,e)};const g=(e=!1,d=0)=>{const r=t.getProjects();if(r)if(e)y(r);else if(d){const e=t.getProjectById(d);l(e)}else y(r),r.todos.map(t=>l(t))},y=t=>{const e=document.getElementById("sidebarProjects");t.todos.forEach(t=>{const d=o(t);e.appendChild(d)})};return{createTask:d,taskForm:e,displayTodos:g}})();c.displayTodos();const l=(()=>{const t=()=>{const t=r(),e=document.getElementById("projectName"),d=e.value;if(!d||""==d)return;const n=t.saveTodoProject(d);document.getElementById("sidebarProjects").appendChild(o({projectName:d,projectId:n}));const a=document.createElement("h2");a.innerText=d;const i=document.createElement("ul");i.setAttribute("id",n);const s=document.createElement("div");s.classList.add("card"),s.appendChild(a),s.appendChild(i),document.getElementById("taskStation").appendChild(s),e.value=""};return{createAddProjectForm:()=>{if(document.querySelector(".project-form"))return;const e=document.createElement("div");e.classList.add("project-form");const d=document.createElement("form");d.classList.add("border","shadow-2xl","p-8");const r=document.createElement("input");r.classList.add("border-b","p-4","hover:border-green-700","focus:border-green-700");const o=document.createElement("button");o.classList.add("bg-green-700","hover:bg-green-900","focus:bg-green-900","p-2","text-white"),o.setAttribute("type","button"),o.addEventListener("click",t),o.innerText="Add a project",r.setAttribute("placeholder","Enter a project name"),r.setAttribute("id","projectName"),r.classList.add("float-right"),d.appendChild(r),d.appendChild(o),e.appendChild(d),n().appendChild(e)}}})();document.getElementById("add-task").addEventListener("click",c.taskForm),document.getElementById("add-project").addEventListener("click",l.createAddProjectForm)},function(t,e){},,,,function(t,e){}]);