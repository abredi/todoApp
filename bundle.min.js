!function(t){var e={};function d(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,d),r.l=!0,r.exports}d.m=t,d.c=e,d.d=function(t,e,n){d.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},d.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},d.t=function(t,e){if(1&e&&(t=d(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(d.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)d.d(n,r,function(e){return t[e]}.bind(null,r));return n},d.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return d.d(e,"a",e),e},d.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},d.p="",d(d.s=0)}([function(t,e,d){"use strict";d.r(e),d(1),d(5);const n=()=>{const t=t=>{localStorage.setItem("project",JSON.stringify({todos:t}))},e=()=>{const t=localStorage.getItem("project");return!!t&&JSON.parse(t)},d=t=>e().todos.find(e=>e.projectId===parseInt(t,10))||!1;return{deleteTaskById:(d,n)=>{const r=e().todos.map(t=>(parseInt(d,10)===t.projectId&&(t.tasks=t.tasks.filter(t=>t.taskId!==parseInt(n,10))),t));t(r)},deleteProjectById:d=>{const n=e().todos.filter(t=>t.projectId!==parseInt(d,10));t(n)},getProjectById:d,saveTodoProject:e=>{let d=localStorage.getItem("project");d||(d=localStorage.setItem("project",'{"todos": []}'),d=localStorage.getItem("project")),d=JSON.parse(d);const n=d.todos.length+1,r=[...d.todos,{projectName:e,projectId:n,tasks:[]}];return t(r),n},getProjects:e,saveTodoTask:d=>{const{todos:n}=e();if(!n)return!1;let r=0;const o=n.map(t=>{if(parseInt(d.projectId,10)===t.projectId){const e=((t,e)=>("taskId"in t?e=((t,e)=>{const d=t.tasks.map(t=>t.taskId===parseInt(e.taskId,10)?e:t);return{...t,tasks:d}})(e,t):(t={...t,taskId:e.tasks.length+1},e={...e,tasks:[...e.tasks,t]}),{givenTodo:t,project:e}))(d,t);return r=e.givenTodo.taskId,e.project}return t});return t(o),r},getTaskById:(t,e)=>{const n=d(t);if(!n)return!1;return n.tasks.find(t=>t.taskId===parseInt(e,10))||!1}}},r=(t="modalStation")=>{const e=document.getElementById(t);for(;e.childElementCount>0;)e.removeChild(e.firstElementChild);return e},o=t=>{t.preventDefault(),r()},a=t=>{const e=document.getElementById("tmpl-modal").content.cloneNode(!0),d=e.getElementById("working-station");e.getElementById("modalContainer").addEventListener("click",o),d.appendChild(t),r().appendChild(e)},i=(t,e,d)=>{const n=document.createElement("div");n.setAttribute("data-card-pid",t.projectId),n.classList.add("card"),n.appendChild(e),n.appendChild(d),document.getElementById("taskStation").appendChild(n)},s=t=>{const e=document.createElement("li"),d=document.createElement("a");return e.classList.add("py-1"),d.classList.add("text-xl","font-light","cursor-pointer"),d.setAttribute("data",t.projectId),d.addEventListener("click",window.selectProjectToDisplay),d.innerText=t.projectName,e.appendChild(d),e},c=(t,e,d,n=null,r=null)=>{const o=document.createElement("select");o.setAttribute("required","required");const a=document.createElement("option");return a.value="",a.setAttribute("disabled","disabled"),n||(a.selected="true"),a.innerText="Choose "+r,o.appendChild(a),o.classList.add("border-b","w-full","border-indigo-500","px-2","py-3"),t&&t.forEach(t=>{const r=document.createElement("option");n===t[d]&&(r.selected=!0),r.setAttribute("value",t[d]),r.innerText=t[e],o.appendChild(r)}),o},l=t=>{const e=document.createElement("ul");return e.classList.add("ml-4","flex-row","divide-y-2","divide-indigo-400","divide-dashed"),e.setAttribute("id",t.projectId),e},p=t=>{const e=n(),{pid:d}=t;if(d){e.deleteProjectById(d);const t=document.querySelector(`[data-card-pid="${d}"]`),n=document.querySelector(`a[data="${d}"]`);t&&(t.parentElement.removeChild(t),n.parentElement.parentElement.removeChild(n.parentElement))}return!1},u=(t,e)=>{const d=document.createElement("div");d.classList.add("flex","items-center","justify-between","px-8","py-4","bg-gray-200","cursor-pointer");const n=document.createElement("button");n.setAttribute("data-pid",t.projectId),n.classList.add("text-sm","text-red-600","focus:outline-none"),n.innerText="Delete",n.addEventListener("click",e);const r=document.createElement("h2");return r.classList.add("text-2xl","font-light","text-gray-700"),r.innerText=t.projectName,d.appendChild(r),d.appendChild(n),d},m="inline-flex justify-center w-full px-4 py-2 text-base font-medium leading-6 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-red sm:text-sm sm:leading-5".split(" ");var b=()=>({present:t=>{const e=document.createElement("button"),d=document.createElement("button"),n=document.createElement("div"),r=document.createElement("h2"),o=document.createElement("div");n.classList.add("w-full"),r.classList.add("text-gray-700","font-hairline","text-xl"),o.classList.add("flex","justify-between","mt-4"),r.innerText=t.message||"Confirm Delete?",d.classList.add(...m,"w-8"),e.classList.add("px-4","py-2","rounded-sm","text-md","mr-4","text-red-500"),e.innerText=t.okBtn||"Accept",d.innerText=t.rejectBtn||"Reject";const i=t.handleOk.bind(t.handleOk,t.data);e.addEventListener("click",i),d.addEventListener("click",t.handleCancel),n.appendChild(r),n.appendChild(o),o.appendChild(d),o.appendChild(e),n.appendChild(o),a(n)},dismiss:()=>{r()}});(()=>{let t=localStorage.getItem("init");if(!t){const e=n();t=localStorage.setItem("init","true");const d=e.saveTodoProject("Default project");e.saveTodoTask({projectId:d,title:"Get familiar with the app",desc:"Try all the features",date:"2020-11-06",priority:"1"})}})();const f=(()=>{const t=n(),e=t=>{t.target.nextElementSibling.classList.toggle("hidden")},d=e=>{(e=>{const{pid:d}=e,{tid:n}=e;if(d&&n){t.deleteTaskById(d,n);const e=document.querySelector(`li[data-task-id="${d}_${n}"]`);e&&e.parentElement.removeChild(e)}})(e),r()},o=t=>{t.preventDefault(),r()},f=t=>{t.preventDefault();const e=t.target.getAttribute("data-pid"),n=t.target.getAttribute("data-tid");b().present({handleOk:d,handleCancel:o,data:{pid:e,tid:n}})},g=t=>{const d=document.createElement("h3");d.innerText=t.title,d.addEventListener("click",e),d.classList.add("cursor-pointer");const n=document.createElement("p"),r=document.createElement("p"),o=document.createElement("p"),a=document.createElement("button");a.setAttribute("data-pid",t.projectId),a.setAttribute("data-tid",t.taskId),a.classList.add("absolute","bottom-10","right-5","cursor-pointer","text-sm","text-red-600","focus:outline-none"),a.innerText="Delete",a.addEventListener("click",f);const i=document.createElement("button");i.setAttribute("data-pid",t.projectId),i.setAttribute("data-tid",t.taskId),i.classList.add("absolute","bottom-10","right-10","cursor-pointer","text-sm","text-indigo-900","focus:outline-none"),i.innerText="Edit",i.addEventListener("click",E),n.innerText=t.date,r.innerText=t.priority,o.innerText=t.desc;const s=document.createElement("div");s.classList.add("hidden"),s.appendChild(n),s.appendChild(r),s.appendChild(o),s.appendChild(i),s.appendChild(a);const c=document.createElement("li");c.setAttribute("data-task-id",`${t.projectId}_${t.taskId}`),c.appendChild(d),c.appendChild(s);let l="";switch(parseInt(t.priority,10)){case 3:l="bg-gray-100";break;case 2:l="bg-indigo-200";break;default:l="bg-indigo-300"}return c.classList.add("px-8","py-4","shadow-lg","relative",l),c},h=(e={})=>{const d=t.getProjects(),n=c(d.todos,"projectName","projectId",e.projectId,"Project");e.title&&n.setAttribute("disabled","disabled"),n.setAttribute("id","projectId");const r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("value",e.title||""),r.setAttribute("id","title"),r.setAttribute("placeholder","Task title"),r.classList.add("border-b","border-indigo-500","w-full","px-2","py-3");const o=document.createElement("textarea");o.innerText=e.desc||"",o.setAttribute("cols","30"),o.setAttribute("row","30"),o.setAttribute("id","desc"),o.classList.add("border-b","border-indigo-500","px-3"),o.setAttribute("placeholder","Task description"),o.classList.add("border-b","border-solid","border-1","border-gray-600","p-3","col-span-2","w-full");const i=document.createElement("input");i.setAttribute("value",e.date||""),i.setAttribute("type","date"),i.setAttribute("id","date"),i.setAttribute("placeholder","Due date"),i.classList.add("border-b","border-indigo-500","w-full","px-2","py-3");const s=c([{priorityName:"One",priorityValue:"1"},{priorityName:"Two",priorityValue:"2"},{priorityName:"Three",priorityValue:"3"}],"priorityName","priorityValue",e.priority||"","Priority");s.setAttribute("placeholder","Task priority"),s.setAttribute("id","priority");const l=document.createElement("input");l.setAttribute("type","button"),l.setAttribute("id","create-task");const p="projectId"in e?"Update Task":"Create Task";l.setAttribute("value",p),l.setAttribute("task-id",e.taskId||""),l.classList.add(...m),l.addEventListener("click",y);const u=document.createElement("h2");u.classList.add("text-2xl","text-2xl","text-gray-700","font-hairline","text-center"),u.innerText="Add task";const b=document.createElement("span");b.setAttribute("id","formErrorBoard"),b.classList.add("text-sm","text-red-500","font-hairline","text-center");const f=document.createElement("form");f.classList.add("p-2","flex","flex-col","row-gap-8","w-full","pt-4"),f.setAttribute("id","addTodo"),f.appendChild(u),f.appendChild(b),f.appendChild(n),f.appendChild(r),f.appendChild(i),f.appendChild(s),f.appendChild(o),f.appendChild(l),a(f)},y=e=>{e.preventDefault();const d=document.getElementById("projectId").value,n=document.getElementById("title").value,o=document.getElementById("desc").value,a=document.getElementById("date").value,i=document.getElementById("priority").value,s=document.getElementById("formErrorBoard");if(""===d||""===n||""===a||""===i)return void(s.innerText="Please fill the fields");s.innerText="",s.classList.add("hidden");let c=e.target.getAttribute("task-id"),l={projectId:d,title:n,desc:o,date:a,priority:i};const p=c&&""!==c;p&&(l={...l,taskId:c}),c=t.saveTodoTask(l),l={...l,taskId:c};const u=g(l);if(p){const t=document.querySelector(`[data-task-id="${d}_${c}"]`);t.parentElement.replaceChild(u,t)}else{const t=document.getElementById(d);t&&t.appendChild(u)}document.getElementById("addTodo").reset(),r()},E=e=>{e.preventDefault();const d=e.target.getAttribute("data-pid"),n=e.target.getAttribute("data-tid");if(!d||!n)return;const r=t.getTaskById(d,n);r&&h(r)},x=t=>{p(t),r()},I=t=>{t.preventDefault();const e=t.target.getAttribute("data-pid");b().present({handleOk:x,handleCancel:o,data:{pid:e}})},j=t=>{const e=u(t,I),d=l(t);t.tasks.forEach(t=>{const e=g(t);d.appendChild(e)}),i(t,e,d)},k=t=>{const e=document.getElementById("sidebarProjects");t.todos.forEach(t=>{const d=s(t);e.appendChild(d)})},v=(e=!1,d=0)=>{const n=t.getProjects();if(n)if(e)k(n);else if(d){const e=t.getProjectById(d);j(e)}else k(n),n.todos.map(t=>j(t))};return window.selectProjectToDisplay=t=>{t.preventDefault();const e=t.target.getAttribute("data");r("taskStation"),v(!1,e)},{displayAllProjects:t=>{t.preventDefault(),r(),r("sidebarProjects"),r("taskStation"),v()},createTask:y,taskForm:h,displayTodos:v}})();f.displayTodos();const g=(()=>{const t=()=>{const t=n(),e=document.getElementById("projectName"),d=document.getElementById("formErrorBoard"),o=e.value;if(!o||""===o)return void(d.innerText="Please fill the fields");d.innerText="",d.classList.add("hidden");const a={projectName:o,projectId:t.saveTodoProject(o)};document.getElementById("sidebarProjects").appendChild(s(a));const c=u(a,p),m=l(a);i(a,c,m),r()};return{createAddProjectForm:()=>{const e=document.createElement("form");e.classList.add("flex","flex-col","gap-y-6","w-full");const d=document.createElement("input");d.classList.add("border-b","border-indigo-500","p-4","hover:border-indigo-600","w-full");const n=document.createElement("button");n.classList.add(...m),n.setAttribute("type","button"),n.addEventListener("click",t),n.innerText="Add a project",d.setAttribute("placeholder","Enter a project name"),d.setAttribute("id","projectName"),d.classList.add("float-right");const r=document.createElement("span");r.setAttribute("id","formErrorBoard"),r.classList.add("text-sm","text-red-500","font-hairline","text-center");const o=document.createElement("h2");o.classList.add("text-2xl","text-gray-700","font-hairline","text-center"),o.innerText="Add Project",e.appendChild(o),e.appendChild(r),e.appendChild(d),e.appendChild(n),a(e)}}})();document.getElementById("all-projects").addEventListener("click",f.displayAllProjects),document.getElementById("add-task").addEventListener("click",f.taskForm),document.getElementById("add-project").addEventListener("click",g.createAddProjectForm)},function(t,e){},,,,function(t,e){}]);